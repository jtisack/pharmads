[
  {
    "objectID": "pharmads-2024.html",
    "href": "pharmads-2024.html",
    "title": "Storytelling with Shiny",
    "section": "",
    "text": "These materials provide an introduction to using R Shiny for data storytelling. They were prepared for the Mastering Storytelling for Pharma Data Science Professionals short course at the Pharmaceutical Data Science Conference 2024 held at University of Connecticut in March 2024.\nThe materials were prepared by Jonathan Tisack (BeiGene) and Dr. Zhiwei Yin (Bristol Myers Squibb).\n\n\n\nJonathan Tisack, M.S. Mathematics\nData Scientist at BeiGene\nR/Shiny user for over 5 years\n\n\n\n\nRate your experience level with R:\n\nI barely know any R\nI know enough R to get around\nI know R inside out\n\nHave you used Shiny before?"
  },
  {
    "objectID": "pharmads-2024.html#introduction",
    "href": "pharmads-2024.html#introduction",
    "title": "Storytelling with Shiny",
    "section": "",
    "text": "These materials provide an introduction to using R Shiny for data storytelling. They were prepared for the Mastering Storytelling for Pharma Data Science Professionals short course at the Pharmaceutical Data Science Conference 2024 held at University of Connecticut in March 2024.\nThe materials were prepared by Jonathan Tisack (BeiGene) and Dr. Zhiwei Yin (Bristol Myers Squibb).\n\n\n\nJonathan Tisack, M.S. Mathematics\nData Scientist at BeiGene\nR/Shiny user for over 5 years\n\n\n\n\nRate your experience level with R:\n\nI barely know any R\nI know enough R to get around\nI know R inside out\n\nHave you used Shiny before?"
  },
  {
    "objectID": "pharmads-2024.html#following-along-during-the-course",
    "href": "pharmads-2024.html#following-along-during-the-course",
    "title": "Storytelling with Shiny",
    "section": "Following along during the Course",
    "text": "Following along during the Course\nSeveral options for running the code during the course:\n\nShinylive is now the easiest way to run a simple Shiny app. Simply click the link and Shiny will run in your browser alongside a basic editor.\n\nThis works using WebR, which is a version for R compiled for the browser using WebAssembly. This is still in early stages and isn’t recommended for production use. Try it here.\n\nRStudio IDE is the best way to do Shiny development. There are two ways to use it:\n\nDownload and install RStudio Desktop.\nRun it through your browser with a free Posit Cloud account."
  },
  {
    "objectID": "pharmads-2024.html#what-is-shiny",
    "href": "pharmads-2024.html#what-is-shiny",
    "title": "Storytelling with Shiny",
    "section": "What is Shiny?",
    "text": "What is Shiny?\n\nShiny Basics\n\nR Shiny is an open source R package that enables easy creation of interactive web applications. It is also available for Python, but the package ecosystem is far less developed.\nPosit (formerly RStudio) created Shiny and continues to lead development.\nNo web development skills required. Shiny generates all the HTML, CSS, and JavaScript for the web app.\nBasic R proficiency is all that is required to use R Shiny.\nShiny has a very active community of developers. There are many, many additional R packages that enhance Shiny.\n\nUse Cases\n\nInteractive data visualization and exploration. Replace a giant PDF of plots with a single app.\nCustomized report generation. Allow users to generate their own reports or tables.\nDeploying R scripts for non-technical users. Make a basic interface that will allow users to interact with your code.\nMake your reports interactive. Shiny can be integrated into RMarkdown/Quarto documents. R/Pharma talk by Max Kuhn on using Shinylive in his new book.\nMake a front-end interface for a large language model.\nEducation tools to explain statistical concepts.\nRStudio IDE gadgets.\n\nLearning Resources\nShiny has been around for 10+ years and there are many learning resources available.\n\nR Shiny Documentation - Includes articles explaining specific topics, as well as a full function reference.\nMastering Shiny book - A book by Hadley Wickham, freely available online, that covers all Shiny features in an approachable manner.\nShiny Cheat Sheet"
  },
  {
    "objectID": "pharmads-2024.html#shiny-architecture",
    "href": "pharmads-2024.html#shiny-architecture",
    "title": "Storytelling with Shiny",
    "section": "Shiny Architecture",
    "text": "Shiny Architecture\n\nTypical Web App Architecture\n\n\n\nStructure of a Shiny App\nTypically a shiny app is written in an R file called app.R. Within app.R there are three components:\n\nA user interface object, typically named ui. This object controls the layout of the app.\nA server function. This function controls the interactive component of the app. It is where your typical R code is executed, such as code that does data transformations and generates visualizations.\nA call to the shiny package function shinyApp(), which takes the ui object and server function as arguments.\n\nHere is a minimal shiny app:\n\n\nCode\nlibrary(shiny)\nui &lt;- fluidPage(\n  \"Hello, world!\"\n)\nserver &lt;- function(input, output, session) {\n}\nshinyApp(ui, server)"
  },
  {
    "objectID": "pharmads-2024.html#examples",
    "href": "pharmads-2024.html#examples",
    "title": "Storytelling with Shiny",
    "section": "Examples",
    "text": "Examples\n\nPosit has many examples in the Shiny Gallery\n\n\nSingle-file Shiny App Example\n\nSingle File Shiny App Example (Open in Shinylive editor)\n\n\nCode\nlibrary(shiny)\n\n# Global variables can go here\nn &lt;- 200\n\n# Define the UI\nui &lt;- bootstrapPage(\n  numericInput('n', 'Number of obs', n),\n  plotOutput('plot')\n)\n\n\n# Define the server code\nserver &lt;- function(input, output) {\n  output$plot &lt;- renderPlot({\n    hist(runif(input$n))\n  })\n}\n\n# Return a Shiny app object\nshinyApp(ui = ui, server = server)\n\n\n\n\n\nK-Means Clustering Example\n\nK-Means Clustering Example (Open in Shinylive editor)\n\n\n\nCode\nlibrary(shiny)\n\n# k-means only works with numerical variables,\n# so don't give the user the option to select\n# a categorical variable\nvars &lt;- setdiff(names(iris), \"Species\")\n\nui &lt;- pageWithSidebar(\n  headerPanel('Iris k-means clustering'),\n  sidebarPanel(\n    selectInput('xcol', 'X Variable', vars),\n    selectInput('ycol', 'Y Variable', vars, selected = vars[[2]]),\n    numericInput('clusters', 'Cluster count', 3, min = 1, max = 9)\n  ),\n  mainPanel(\n    plotOutput('plot1')\n  )\n)\n\nserver &lt;- function(input, output, session) {\n\n  # Combine the selected variables into a new data frame\n  selectedData &lt;- reactive({\n    iris[, c(input$xcol, input$ycol)]\n  })\n\n  clusters &lt;- reactive({\n    kmeans(selectedData(), input$clusters)\n  })\n\n  output$plot1 &lt;- renderPlot({\n    palette(c(\"#E41A1C\", \"#377EB8\", \"#4DAF4A\", \"#984EA3\",\n      \"#FF7F00\", \"#FFFF33\", \"#A65628\", \"#F781BF\", \"#999999\"))\n\n    par(mar = c(5.1, 4.1, 0, 1))\n    plot(selectedData(),\n         col = clusters()$cluster,\n         pch = 20, cex = 3)\n    points(clusters()$centers, pch = 4, cex = 4, lwd = 4)\n  })\n\n}\n\n# Create Shiny app ----\nshinyApp(ui = ui, server = server)"
  },
  {
    "objectID": "pharmads-2024.html#user-interface",
    "href": "pharmads-2024.html#user-interface",
    "title": "Storytelling with Shiny",
    "section": "User Interface",
    "text": "User Interface\n\nThe UI is mainly composed of inputs and outputs.\nInputs are widgets that get input from the user\n\nOutputs are placeholders that are later filled in by the server function. Each output has a corresponding render function in the server.\n\n\n\nThe user interface is static\nCode in the user interface is only run once. To illustrate this, try inspecting the ui object.\n\n\n\n\n\n\nStructure of a UI object\n\n\n\n\n\n\nlibrary(shiny)\nui &lt;- fluidPage(\n  numericInput('n', 'Number of obs', 100),\n  plotOutput('plot')\n)\n\n\nprint(ui)\n\n&lt;div class=\"container-fluid\"&gt;\n  &lt;div class=\"form-group shiny-input-container\"&gt;\n    &lt;label class=\"control-label\" id=\"n-label\" for=\"n\"&gt;Number of obs&lt;/label&gt;\n    &lt;input id=\"n\" type=\"number\" class=\"shiny-input-number form-control\" value=\"100\"/&gt;\n  &lt;/div&gt;\n  &lt;div class=\"shiny-plot-output html-fill-item\" id=\"plot\" style=\"width:100%;height:400px;\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n\n\n\nstr(ui)\n\nList of 4\n $ :List of 10\n  ..$ name      : chr \"jquery\"\n  ..$ version   : chr \"3.6.0\"\n  ..$ src       :List of 1\n  .. ..$ file: chr \"www/shared\"\n  ..$ meta      : NULL\n  ..$ script    : chr \"jquery.min.js\"\n  ..$ stylesheet: NULL\n  ..$ head      : NULL\n  ..$ attachment: NULL\n  ..$ package   : chr \"shiny\"\n  ..$ all_files : logi FALSE\n  ..- attr(*, \"class\")= chr \"html_dependency\"\n $ : NULL\n $ : NULL\n $ :List of 1\n  ..$ :List of 3\n  .. ..$ name    : chr \"div\"\n  .. ..$ attribs :List of 1\n  .. .. ..$ class: chr \"container-fluid\"\n  .. ..$ children:List of 2\n  .. .. ..$ :List of 3\n  .. .. .. ..$ name    : chr \"div\"\n  .. .. .. ..$ attribs :List of 1\n  .. .. .. .. ..$ class: chr \"form-group shiny-input-container\"\n  .. .. .. ..$ children:List of 2\n  .. .. .. .. ..$ :List of 3\n  .. .. .. .. .. ..$ name    : chr \"label\"\n  .. .. .. .. .. ..$ attribs :List of 3\n  .. .. .. .. .. .. ..$ class: chr \"control-label\"\n  .. .. .. .. .. .. ..$ id   : chr \"n-label\"\n  .. .. .. .. .. .. ..$ for  : chr \"n\"\n  .. .. .. .. .. ..$ children:List of 1\n  .. .. .. .. .. .. ..$ : chr \"Number of obs\"\n  .. .. .. .. .. ..- attr(*, \"class\")= chr \"shiny.tag\"\n  .. .. .. .. ..$ :List of 3\n  .. .. .. .. .. ..$ name    : chr \"input\"\n  .. .. .. .. .. ..$ attribs :List of 4\n  .. .. .. .. .. .. ..$ id   : chr \"n\"\n  .. .. .. .. .. .. ..$ type : chr \"number\"\n  .. .. .. .. .. .. ..$ class: chr \"shiny-input-number form-control\"\n  .. .. .. .. .. .. ..$ value: chr \"100\"\n  .. .. .. .. .. ..$ children: list()\n  .. .. .. .. .. ..- attr(*, \"class\")= chr \"shiny.tag\"\n  .. .. .. ..- attr(*, \"class\")= chr \"shiny.tag\"\n  .. .. ..$ :List of 3\n  .. .. .. ..$ name    : chr \"div\"\n  .. .. .. ..$ attribs :List of 4\n  .. .. .. .. ..$ id   : chr \"plot\"\n  .. .. .. .. ..$ class: chr \"shiny-plot-output\"\n  .. .. .. .. ..$ style: chr \"width:100%;height:400px;\"\n  .. .. .. .. ..$ class: chr \"html-fill-item\"\n  .. .. .. ..$ children: list()\n  .. .. .. ..- attr(*, \"class\")= chr \"shiny.tag\"\n  .. ..- attr(*, \"class\")= chr \"shiny.tag\"\n - attr(*, \"class\")= chr [1:2] \"shiny.tag.list\" \"list\"\n - attr(*, \"html_dependencies\")=List of 1\n  ..$ :function ()  \n  .. ..- attr(*, \"class\")= chr \"shiny.tag.function\""
  },
  {
    "objectID": "pharmads-2024.html#server-and-reactivity",
    "href": "pharmads-2024.html#server-and-reactivity",
    "title": "Storytelling with Shiny",
    "section": "Server and Reactivity",
    "text": "Server and Reactivity\n\nShiny server logic is based on a reactive programming paradigm.\nReactivity means that when an input changes, all dependent outputs are recalculated.\nServer logic is expressed in the server(input, output, session) function, which Shiny invokes each time a new session starts.\n\nA session starts whenever a user opens the shiny app. A single shiny server may run many sessions from different (or the same) users.\nThe parameters of the server function (input, output, session) are separate for each session.\n\nThe three parameters of the server function are:\n\ninput: A read-only list of the inputs defined in the UI, and their current values. This is how the server function can use the inputs defined in the UI.\noutput: A list of outputs defined in the UI. This is how a user defines the app’s outputs, and it must always be used with a render function.\nsession: An optional parameter with a lot of functionality, mainly for advanced users. See the documentation for details.\n\nCode in the server function is not run linearly, it is lazy and reactive.\n\nLazy means that that it is only run when needed. If a user can’t see an output on their screen, the code to generate that output is not run. If an app has multiple pages/tabs, the code for an output isn’t run until the user navigates to that tab.\nReactive means that when an input is used in the code that defines an output, that output takes a dependency on the input. Whenever a dependency of an output changes, the output code will be re-run.\n\nThis means that the order of code in the server function does not matter. Code is run when needed, based on the reactive graph.\n\nExamples from Posit Documentation.\nA simple reactive graph.\n\nserver &lt;- function(input, output) {\n  output$distPlot &lt;- renderPlot({\n    hist(rnorm(input$obs))\n  })\n}\n\n\nA more complex reactive graph. Outputs can depend on any combination of inputs. Dependencies can overlap between outputs.\n\nserver &lt;- function(input, output) {\n  output$plotOut &lt;- renderPlot({\n    hist(faithful$eruptions, breaks = as.numeric(input$nBreaks))\n    if (input$individualObs)\n      rug(faithful$eruptions)\n  })\n\n  output$tableOut &lt;- renderTable({\n    if (input$individualObs)\n      faithful\n    else\n      NULL\n  })\n}\n\n\nA reactive graph with an intermediate reactive expression.\n\nfib &lt;- function(n) ifelse(n&lt;3, 1, fib(n-1)+fib(n-2))\n\nserver &lt;- function(input, output) {\n  currentFib         &lt;- reactive({ fib(as.numeric(input$n)) })\n\n  output$nthValue    &lt;- renderText({ currentFib() })\n  output$nthValueInv &lt;- renderText({ 1 / currentFib() })\n}"
  },
  {
    "objectID": "pharmads-2024.html#advanced-ui",
    "href": "pharmads-2024.html#advanced-ui",
    "title": "Storytelling with Shiny",
    "section": "Advanced UI",
    "text": "Advanced UI\n\nBslib\nbslib is a package that expands the user interface toolkit for Shiny. It is particularly helpful for custom theming and dashboard design. Think of it like Shiny UI 2.0.\n\n\nBootstrap\nBootstrap is a frontend web framework that Shiny utilizes when it generates the HTML/CSS/JS from the ui object. Web frameworks like Bootstrap exist so that web developers don’t reinvent the wheel each time they create a new project. You don’t need to know anything about Bootstrap to create a Shiny app, but can be helpful if you are a user interface perfectionist. By default shiny utilizes Bootstrap 3, and the bslib package uses Boostrap 5 (the latest version).\n\n\n\nShinyUiEditor\nShinyUiEditor is a package that launches a low-code tool for building a Shiny UI and generating app code. You don’t actually need to install it to use it, you can launch a demo through the package website.\n\n\nPlotly\nOne of the most popular packages to use with Shiny is plotly, which is an R package based on the plotlyjs web framework for plotting. There is a freely available book written by the package author Carson Sievert: Interactive web-based data visualization with R, plotly, and shiny.\n\n\nMany, many other Shiny packages\nThere are many R packages available that extend Shiny in various ways. A nice list of the most popular ones is maintained in the Github repo nanxstats/awesome-shiny-extensions."
  },
  {
    "objectID": "pharmads-2024.html#deployment",
    "href": "pharmads-2024.html#deployment",
    "title": "Storytelling with Shiny",
    "section": "Deployment",
    "text": "Deployment\n\n\nShiny Server\nShiny Server is open source web server software. A single server running Shiny Server can host many shiny apps.\n\nShinyapps.io is a managed service that runs Shiny Server for you. It’s the easiest way to get started deploying Shiny apps. Deploying is fast and simple through the RStudio IDE. It’s free for 25 hours of hosting per month and paid tiers allow additional hours.\nHost Shiny Server on your own server. This will take some IT support or knowledge, but many guides exist or deploying Shiny Server yourself.\n\n\n\nShinylive\nShinylive uses WebR to run a shiny app in the browser. There is no backend server required.\n\nThe technology is still early and many packages don’t work.\nNo server involved. Doesn’t work with large data sets.\nThe R code is run in the browser and therefore the user has access to the entire app’s source code and data.\n\nTwo ways to use shinylive:\n\nCreate your app on shinylive.io and use the “Share” button to generate a link to it. All of your app’s code and other assets will be compressed to a string and contained in the generated link. Then simply send this link to a user. This is the easiest way to share a Shiny app but it’s limited to small apps.\nUse the shinylive R package to create and host your own static website. This is easy to do in combination with the shinylive quarto extension."
  }
]